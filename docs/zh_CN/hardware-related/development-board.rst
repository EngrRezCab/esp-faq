开发板使用
==========

:link_to_translation:`en:[English]`

.. raw:: html

   <style>
   body {counter-reset: h2}
     h2 {counter-reset: h3}
     h2:before {counter-increment: h2; content: counter(h2) ". "}
     h3:before {counter-increment: h3; content: counter(h2) "." counter(h3) ". "}
     h2.nocount:before, h3.nocount:before, { content: ""; counter-increment: none }
   </style>

--------------

ESP32-Korvo V1.1 开发板是否集成 LED driver 芯片？
-----------------------------------------------------

  乐鑫出厂的 ESP32-Korvo V1.1 开发板中集成了 LED driver 芯片。

--------------

ESP-EYE 开发板运行发热过高如何改善？
---------------------------------------

  - 降低功耗：如果摄像头并非实时开启，Wi-Fi 可以周期传输，空闲时间可以进入休眠模式以降低功耗。
  - 增大散热面积：可以通过在 ESP32 芯片上方增加散热片实现。

--------------

若开发板不使用 USB 供电，应如何使用管脚供电？
-------------------------------------------------

  - 第一种方法："3V3 连接 3V3" + "GND 连接 GND"（如果开发板存在非 3.3 V 供电的器件，则该器件将无法使用）。
  - 第二种方法："5V 连接 5V" + "GND 连接 GND"。

  .. note:: 供电电流需要满足 500 mA。

----------

ESP8266 连接手机热点，出现如下报错，有哪些原因？
--------------------------------------------------------

  .. code-block:: text

    wifi: state : 0 -> 2 (b0)
    wifi: state : 2 -> 0 (200)
    simple wifi : Disconnect reason : 2

  - 请检查外接天线状态、路由器是否存在以及 SSID 是否正确。

--------------

开发板 ESP32-Korvo-DU1906 中 DU1906 芯片音频数据通过什么协议与 ESP32 交互？
----------------------------------------------------------------------------------

  - 开发板 ESP32-Korvo-DU1906 中，DU1906 的音频数据通过 SPI 传给 ESP32。

--------------

是否有支持 POE 供电的以太网开发板？
---------------------------------------------------------------------------------------

  - `ESP32-Ethernet-Kit <https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32/hw-reference/esp32/get-started-ethernet-kit.html>`_ 是支持 POE 供电的以太网开发板。

--------------

为什么在 ESP32S2-Kaluga 中 Audio 和 Camera 不能共用？
-----------------------------------------------------

  - Camera 和 Audio 都使用了 I2S 接口进行通讯，而 ESP32S2 只有 1 路 I2S。
  - 并且 Camera 使用并行 I2S，而 Audio Codec 使用串行 I2S，这两种模式不能一起工作，因此不能通过 CS 线来分时复用，必须重新配置。

--------------

ESP32S2-Kaluga 是否支持蓝牙语音？
-----------------------------------

  - Kaluga 使用的芯片为 ESP32S2，该芯片不支持蓝牙功能，您可以选择使用 ESP32 的开发板或芯片进行相关功能的开发。

--------------

ESP32S2-Kaluga 上的 Codec 芯片是否自带功放？最大支持外接多大功率的喇叭？
--------------------------------------------------------------------------

  - Kaluga 使用的 Codec 芯片内部未集成功放，Codec 芯片仅可以驱动低阻抗耳机。
  - 因此，开发板集成了一颗型号为 NS415 的 PA，最大可输出功率为 3 W（典型值），推荐使用 5 V 4 欧的扬声器。

------------------------------------------

ESP32-S2-Kaluga-1 是否有并行 LCD 接口？如果有，硬件上需要如何使用？
--------------------------------------------------------------------------------------------------------------------------------

  - ESP32-S2-Kaluga-1 上有并行 LCD 接口，但是目前暂时没有提供配套的屏幕，硬件设计可以参考 `ESP32-S2-Kaluga-1 硬件设计指南 <https://docs.espressif.com/projects/espressif-esp-dev-kits/zh_CN/latest/esp32s2/esp32-s2-kaluga-1/reference/reference-doc.html>`_。 

--------------

ESP32S2-Kaluga 是否支持 USB 调试？
-------------------------------------

  - Kaluga 所有版本均内置了 FT2232HL，该芯片自带 USB - JTAG Bridge 以使用 JTAG 调试功能。
  - 您需要切换拨码开关来连接 JTAG 相关引脚，在 ESP-IDF menuconfig 中打开 JTAG 调试功能，并且确保 eFuse 没有禁用 JTAG 调试。
  - 安装 OpenOCD 以支持 JTAG 调试之后，便可以使用 ``idf.py openocd gdb`` 、``idf.py openocd gdbgui`` 等命令进行调试。

--------------

ESP32S2-Kaluga 中为什么需要多加一块数字 MIC 芯片，不可以直接使用 ADC 采集吗？
-------------------------------------------------------------------------------

  - Kaluga 可以直接使用内部或外部的 ADC 采集模拟麦克风的信号，但是可能需要自行设计相关电路。
  - Kaluga LyraT V1.2 贴了数字麦和模拟麦两种 MIC，Kaluga LyraT V1.3 只贴了模拟麦。使用两种麦克风是为了方便用户对不同种类的麦克风进行评估。
  - 数字麦克风引脚直接与 ESP32 管脚连接，通过 I2S 进行通讯。
  - 模拟麦克风连接到了 Audio Codec IC，由 Codec IC 内部的 ADC 进行采样，并通过 Codec IC 的I2S 接口进行通讯。
  - Kaluga 使用的 Codec IC 同时支持音频的编码和解码，您可以同时使用音频采集和播放功能，无需使用额外的 ADC 及相关的转换调理电路。

--------------

ESP32S2-Kaluga 中的 speaker 与 Audio_Out 接口是否支持同时输出？
------------------------------------------------------------------

  - ESP32S2-Kaluga 中的 speaker 与 Audio_Out 接口可以同时输出。
  - 如果您使用模拟麦克风，那么您只需要将麦克风的音频 PA 连接至 Codec IC，便可以使用 I2S 与 Codec 进行全双工通讯，同时进行音频采集和播放。
  - 如果您使用数字麦克风，那么您只需要将数字麦克风和 Codec IC 连接至 ESP32S2 的 I2S 相关引脚，便可以使用 I2S 进行全双工通讯。

--------------

ESP32S2-Kaluga-V1.2 中的 I2C *FPC* CNN 接口如何使用？是否有相关的例程？
----------------------------------------------------------------------------

  - 该 FPC 可供用户在自行开发产品时，通过使用 Kaluga 底板进行功能评估而无需预先设计主控板，方便进行功能测试，因此没有相关例程提供。

--------------

ESP32S2-Kaluga-V1.2 中的 4.3 inch *LCD* FPC_CNN 接口是否为并口 LCD 接口？
-------------------------------------------------------------------------------

  - 是的，该 FPC 接口可以用于驱动并口的屏幕。

  .. note::
    - 该 FPC 默认未贴，需要用户自行焊接。
    - 由于并口会占用大量的 IO 口，因此，音频板和摄像头的功能都会无法使用，或者需要分时复用。
    - 目前暂未提供基于并口的 Kaluga LCD 例程，用户可能需要自行实现其驱动。

--------------

ESP32S2-Kaluga-V1.2 PCB 上有很多没有焊接元件的地方，是否是运送过程中丢失？ 
----------------------------------------------------------------------------

  - Kaluga 的每个版本上都有一些元件位的焊盘上无元件的情况，这些是处于未来的升级而预留的位置。
  - 例如并口屏的 FPC 接口，由于目前暂未使用，因此没有贴。同理，音频板上的 ES7210 也没有贴。

--------------

ESP32-S2-Kaluga-V1.2 开发板配有摄像头，是否有摄像头的例程可以提供？
---------------------------------------------------------------------

  - `ESP32-S2-Kaluga-V1.2 开发板例程代码 <https://github.com/espressif/esp-dev-kits/tree/master/esp32-s2-kaluga-1>`__。
  - `ESP32-S2-Kaluga-V1.2 开发板摄像头例程 <https://github.com/espressif/esp-dev-kits/tree/master/esp32-s2-kaluga-1/examples/camera>`__。

--------------

ESP32 DevKitc 开发板 LED 灯不亮，设备管理器也无法找到该设备，可能是什么原因导致的？
------------------------------------------------------------------------------------------

  - 检查供电是否正常：插上 USB 线之后供电，用万用表测试引脚 VCC 和 GND 是否有电压。
  - 检查是否为特定开发板故障：检查其他的 ESP32 DevKitc 开发板设备用该 USB 线是否正常。
  - 若尝试上述方法后仍无法找到原因，可以通过 USB 转 TTL 设备去接线，只需接 ESP32 DevKitc 的 VCC、GND、TXD 引脚，测试是否为芯片问题，用串口助手查看是否能够打印日志。
  - 如果可以，请测试串口驱动芯片是否有电压，可以参考 `esp32-devkitc 原理图 <https://www.espressif.com/sites/default/files/documentation/esp32-devkitc-v4_reference_design_0.zip>`_。

--------------

文档中有提到 EN 按键，但在购买的开发板上没有找到该按键？
-----------------------------------------------------------

  建议检查开发板是否有 Reset 按键，由于 EN 常用做复位功能，部分开发板丝印会标记为 Reset 按键。

---------------

使用 ESP32 开发板，连接 Windows 电脑后未在设备管理器中找到串口，有哪些原因？
------------------------------------------------------------------------------------------

  使用 ESP32 开发板连接到 Windows 电脑后，如果在设备管理器中未找到串口，可能是以下几个原因：

  - 未安装驱动程序：在使用 ESP32 开发板连接 Windows 电脑前，需要安装驱动程序。如果没有安装驱动程序或者驱动程序安装不正确，开发板将无法被识别为串口设备。下载安装 `FT232R USB UART 驱动 <https://www.usb-drivers.org/ft232r-usb-uart-driver.html>`_。
  - USB 线松动或损坏：如果 USB 线松动或损坏，可能会导致开发板无法被正确识别。用户可以更换 USB 线或者检查 USB 线是否插紧，确保 USB 线与电脑之间的连接正常。
  - 开发板故障：如果以上两种情况都不存在，那么可能是开发板本身存在故障。用户可以尝试使用其他 USB 端口或者其他电脑进行连接测试，或者进行开发板的硬件检测和维修。

  需要注意的是，在进行开发板连接测试时，需要确认开发板的串口设置和驱动程序设置是否正确。有些开发板需要在串口设置中手动选择正确的端口号和波特率，才能正确连接到电脑。同时，一些驱动程序也需要手动设置端口号和波特率，确保与开发板设置一致。

---------------

使用 ESP32-LyraT-V4.3 音频开发板，长按 Boot 按键也很难进入下载模式，是什么原因？
--------------------------------------------------------------------------------------

  - 正确的做法是：长按 Boot 按键，然后按 RST 按键（此时 Boot 按键不松开），然后松开 RST 按键（此时 Boot 依然不松开），当进入下载模式开始下载后，即可松开 Boot 键。

---------------

使用 ESP-WROOM-02D 模组，复位信号持续多久后模组会进入复位状态？
----------------------------------------------------------------------------------------------

  - 当输入电平低于 0.6 V 并持续 200 μs 以上时，ESP-WROOM-02D 模组会重启。

---------------

ESP32-LyraT-Mini 开发板的原理图中将 ES8311 codec 芯片的模拟量输出连接到了 ES7243 ADC 芯片的输入，这样做的目的是什么？
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  - AEC 回声参考信号的硬件回采电路将 Codec（ES8311）的 DAC 输出同时传输给喇叭 PA 和 ADC（ES7243）AINLP/N，随后将采集的信号送回 ESP32，用做 AEC 回声消除算法的参考信号。

----------------

使用 ESP32-mini-1 模组，串口上电打印日志如下，是什么原因？
---------------------------------------------------------------------------------------

  .. code-block:: text

      rst:0x10 (RTCWDT_RTC_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
      invalid header: 0xffffffff
      invalid header: 0xffffffff
      invalid header: 0xffffffff
      invalid header: 0xffffffff
      invalid header: 0xffffffff
      invalid header: 0xffffffff
      invalid header: 0xffffffff
      invalid header: 0xffffffff
      ets Jul 29 2019 12:21:46

  - ESP32-MINI-1 模组打印如上日志是因为 Flash 没有程序。

------------

`ESP32-S3-DevKitC-1 <https://docs.espressif.com/projects/esp-idf/zh_CN/latest/esp32s3/hw-reference/esp32s3/user-guide-devkitc-1.html#esp32-s3-devkitc-1-v1-1>`_ 开发板的 RGB LED 连接的是哪个 GPIO?
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  - `ESP32-S3-DevKitC-1 v1.0 <https://dl.espressif.com/dl/SCH_ESP32-S3-DEVKITC-1_V1_20210312C.pdf>`_ 版本开发板的 RGB LED 连接的是 GPIO48。
  - `ESP32-S3-DevKitC-1 v1.1 <https://dl.espressif.com/dl/schematics/SCH_ESP32-S3-DevKitC-1_V1.1_20221130.pdf>`_ 版本开发板的 RGB LED 连接的是 GPIO38。
  - `ESP32-S3-DevKitC-1 v1.1 <https://dl.espressif.com/dl/schematics/SCH_ESP32-S3-DevKitC-1_V1.1_20221130.pdf>`_ 版本开发板将 RGB LED 管脚改为 GPIO38 是因为 `ESP32-S3R8V 芯片 <https://www.espressif.com/sites/default/files/documentation/esp32-s3_datasheet_cn.pdf>`_ 的 VDD_SPI 电压已设置为 1.8 V。所以，不同于其他 GPIO，该芯片在 VDD_SPI 电源域中的 GPIO47 和 GPIO48 的工作电压也为 1.8 V。
