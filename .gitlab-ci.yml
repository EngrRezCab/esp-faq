stages:
    - build

build_docs:
    stage: build
    image: $CI_SPHINX_DOCKER:latest
    tags:
        - build_docs
    artifacts:
        when: always
        paths:
            # English version of documentation
            - docs/en/sphinx-warning-log.txt
            - docs/en/_build/html
            # Chinese version of documentation
            - docs/zh_CN/sphinx-warning-log.txt
            - docs/zh_CN/_build/html
        expire_in: 3 day
    script:
      - cd docs
      # make English version of documentation
      - cd en
      - make html
      - ../check_doc_warnings.sh
      - cd ..
      # make Chinese version of documentation
      - cd zh_CN
      - make html
      - ../check_doc_warnings.sh
      - cd ..
  